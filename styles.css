
:root{--red:#d00000;--border:#e9e9e9;--text:#111;--muted:#666;--bg:#fff}
*{box-sizing:border-box}html,body{margin:0;padding:0;background:#fff;color:var(--text);font-family:Inter,Arial,system-ui}
#app{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
.sidebar{background:#f8f8f8;border-right:1px solid var(--border);display:flex;flex-direction:column}
.brand{padding:14px;border-bottom:1px solid var(--border)}
.brand .brand-title{font-weight:800}
.brand .brand-sub{color:var(--muted)}
.menu{display:flex;flex-direction:column;padding:8px}
.menu button{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px;margin:5px 8px;text-align:left;cursor:pointer}
.menu button:hover,.menu button.active{background:var(--red);border-color:var(--red);color:#fff}
.topbar{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid var(--border);background:#fff;position:sticky;top:0;z-index:5}
.hamburger{background:#fff;border:1px solid var(--border);border-radius:10px;padding:8px 10px;font-size:18px}
.view{padding:14px}.hidden{display:none}.spacer{flex:1}
.card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:16px}
.cards{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.panel{background:#fafafa;border:1px solid var(--border);border-radius:14px;padding:16px;margin:12px 0}
.panel-title{font-weight:700;margin-bottom:10px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.col-span-3{grid-column:1/-1}
.right{text-align:right}.mt-2{margin-top:12px}
input,select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff}
.btn{background:var(--red);color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer}
.btn.small{padding:6px 10px;font-size:12px}
.btn.outline{background:#fff;color:var(--red);border:1px solid var(--red)}
.btn.danger{background:#b00020}
.list,.table{border:1px solid var(--border);border-radius:12px;background:#fff}
.table .row{display:grid;grid-template-columns:150px 1fr 100px 100px 80px 160px;gap:6px;padding:8px 10px;border-bottom:1px solid var(--border);align-items:center}
.table .row.header{background:#f3f3f3;font-weight:700}
.table .row:last-child{border-bottom:none}
.icon-btn{background:#fff;border:1px solid var(--border);border-radius:8px;padding:6px 8px;cursor:pointer}
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.catalog{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
.catalog .item{border:1px solid var(--border);border-radius:12px;padding:10px;text-align:center}
.badge{display:inline-block;padding:2px 6px;border-radius:999px;border:1px solid var(--border);font-size:11px;color:#444;background:#fff}
/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:20}
.modal .modal-content{background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px;width:min(900px,92vw)}
.modal .modal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.modal .modal-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
.modal.show{display:flex}
/* Drawer mobile */
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.30);z-index:9;display:none}
/* Bottom actions bar (fixed) */
.bottom-actions{position:sticky;bottom:0;z-index:6;background:#fff;border-top:1px solid var(--border);padding:10px;display:flex;gap:8px;justify-content:flex-end}
@media (max-width:1060px){
  #app{grid-template-columns:1fr}
  .sidebar{position:fixed;left:0;top:0;bottom:0;width:80vw;max-width:320px;transform:translateX(-105%);transition:transform .2s ease;z-index:10}
  body.drawer-open .sidebar{transform:translateX(0)}
  body.drawer-open .backdrop{display:block}
  .cards{grid-template-columns:1fr}
  .grid-3{grid-template-columns:1fr}
  .grid-2{grid-template-columns:1fr}
  .table .row{grid-template-columns:1fr;gap:4px}  /* tablas -> lista en mÃ³vil */
}
/* Ticket 58mm + print-only */
@page { size: 58mm auto; margin: 0; }
.ticket58 { width: 58mm; background:#fff; }
.ticket58 img { display:block; width:58mm; height:auto; margin:0 auto 4px auto; }
@media print {
  html,body{width:58mm !important;margin:0 !important;padding:0 !important;background:#fff !important;
    font-family: ui-monospace, Menlo, Consolas, "Liberation Mono", monospace !important; font-size:12px !important; line-height:1.3 !important;}
  .sidebar, .topbar, .menu, .btn, .no-print, .panel-title, header, nav, .cards, .view > :not(#ticketOnly){ display:none !important; visibility:hidden !important; height:0 !important; }
  #ticketOnly{ display:block !important; width:58mm !important; margin:0 !important; padding:0 !important; border:0 !important; }
  .ticket58{ width:58mm !important; margin:0 !important; padding:0 !important; border:0 !important; }
  .ticket58 pre{ white-space:pre-wrap !important; margin:0 !important; }
}


/* === v4.1.3: Thermal 58mm print fix === */
.ticket58 { width: 58mm; max-width: 58mm; margin: 0 auto; }
.ticket58 img { display:block; max-width: 54mm; margin: 0 auto 4px; }
#ticketOnly.ticket58 { width:58mm; padding:2mm; }

@media print {
  body { margin:0; }
  .no-print { display: none !important; }
  body * { visibility: hidden !important; }
  #printHolder, #printHolder * { visibility: visible !important; }
  #printHolder { display:block !important; position: static !important; }
  #ticketOnly.ticket58 { width:58mm !important; }
  @page { size: 58mm auto; margin: 0; }
}


/* === v4.1.5: Visible debug overlay & cards === */
#dbgOverlay{position:fixed;inset:0;display:none;align-items:flex-start;justify-content:center;background:rgba(255,255,255,.85);z-index:99999}
#dbgCard{margin-top:24px;max-width:680px;width:calc(100% - 24px);border:2px solid #b00020;border-radius:12px;background:#fff;padding:12px 14px;font:13px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;color:#111;box-shadow:0 6px 24px rgba(0,0,0,.15)}
#dbgCard h3{margin:0 0 6px 0;color:#b00020}
#dbgCard pre{white-space:pre-wrap;word-break:break-word;max-height:45vh;overflow:auto;background:#fff3f3;border:1px dashed #f4b4b4;padding:8px;border-radius:8px}
#dbgClose{float:right;cursor:pointer;padding:4px 8px;border-radius:8px;border:1px solid #b00020;background:#fff;color:#b00020}
